<md-toolbar class="title-form">
  <md-input-container class="fakeHint" floatPlaceholder="never" *ngIf="isSearch" style="width: 100%;">
    <input mdInput #inputSearch placeholder="Pesquisar" (input)="changeSearch($event.target.value)">
  </md-input-container>
  <h4 *ngIf="!isSearch">{{title}} - FASE 1</h4>
  <span class="toolbar-spacer"></span>
  <!--<button color="accent" md-raised-button mdTooltip="Adicionar Concluinte" class="add" routerLink="add">
    Adicionar Concluinte
  </button>-->
  <button md-icon-button mdTooltip="Filtrar" (click)="enableSearch(inputSearch)" *ngIf="!isSearch">
    <md-icon>filter_list</md-icon>
  </button>

  <button md-icon-button mdTooltip="Limpar busca" (click)="clearSearch()" *ngIf="isSearch">
    <md-icon>close</md-icon>
  </button>

  <button md-icon-button mdTooltip="Deletar" (click)="deleteStudents()" *ngIf="selectedStudents.length>0">
    <md-icon>delete</md-icon>
  </button>

  <button md-icon-button [mdMenuTriggerFor]="listMenu" mdTooltip="Mais opções">
    <md-icon>more_vert</md-icon>
  </button>
  <md-menu #listMenu="mdMenu">
    <button md-menu-item>
      <md-icon>file_download</md-icon>
      <span>Baixar Formulário</span>
    </button>
    <button md-menu-item>
      <md-icon>help_outline</md-icon>
      <span>Ajuda</span>
    </button>
  </md-menu>
</md-toolbar>
<table class="table">
  <thead>
    <tr>
      <th>
         <md-checkbox #inputSelectAll (change)="toogleSelectedAll($event.checked)"></md-checkbox>
      </th>
      <th [class.td-sort]="sort.field == 'name'">
        <a (click)="changeSortAndOrder('name')">
          Nome
          <md-icon *ngIf="sort.order == 'asc' && sort.field == 'name'">arrow_upward</md-icon>
          <md-icon *ngIf="sort.order == 'desc' && sort.field == 'name'">arrow_downward</md-icon>
        </a>
      </th>
      <th [class.td-sort]="sort.field == 'id'">
        <a (click)="changeSortAndOrder('id')">
          COD
          <md-icon *ngIf="sort.order == 'asc' && sort.field == 'id'">arrow_upward</md-icon>
          <md-icon *ngIf="sort.order == 'desc' && sort.field == 'id'">arrow_downward</md-icon>
        </a>
      </th>
      <th [class.td-sort]="sort.field == 'unit.description'">
        <a (click)="changeSortAndOrder('unit.description')">
          Unidade
          <md-icon *ngIf="sort.order == 'asc' && sort.field == 'unit.description'">arrow_upward</md-icon>
          <md-icon *ngIf="sort.order == 'desc' && sort.field == 'unit.description'">arrow_downward</md-icon>
        </a>
      </th>
      <th [class.td-sort]="sort.field == 'modality.description'">
        <a (click)="changeSortAndOrder('modality.description')">
          Modalidade
          <md-icon *ngIf="sort.order == 'asc' && sort.field == 'modality.description'">arrow_upward</md-icon>
          <md-icon *ngIf="sort.order == 'desc' && sort.field == 'modality.description'">arrow_downward</md-icon>
        </a>
      </th>
      <th [class.td-sort]="sort.field == 'course.description'">
        <a (click)="changeSortAndOrder('course.description')">
          Curso
          <md-icon *ngIf="sort.order == 'asc' && sort.field == 'course.description'">arrow_upward</md-icon>
          <md-icon *ngIf="sort.order == 'desc' && sort.field == 'course.description'">arrow_downward</md-icon>
        </a>
      </th>
      <th [class.td-sort]="sort.field == 'class'">
        <a (click)="changeSortAndOrder('class')">
          Turma
          <md-icon *ngIf="sort.order == 'asc' && sort.field == 'class'">arrow_upward</md-icon>
          <md-icon *ngIf="sort.order == 'desc' && sort.field == 'class'">arrow_downward</md-icon>
        </a>
      </th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngIf="isLoading">
      <td class="loadingTable" colspan="8"><md-progress-bar mode="indeterminate"></md-progress-bar></td>
    </tr>
    <tr *ngIf="!isLoading && students.length==0" >
      <td class="feedbackTable" colspan="8">Nenhum concluinte encontrado</td>
    </tr>
    <tr  *ngFor="let student of students">
      <td>
         <md-checkbox [(ngModel)]="student.checked" (change)="toogleSelected($event.checked, student)"></md-checkbox>
      </td>
      <td>{{student.name}}</td>
      <td>{{student.id}}</td>
      <td>{{student.unit?.description}}</td>
      <td>{{student.modality?.description}}</td>
      <td>{{student.course?.description}}</td>
      <td>{{student.class}}</td>
      <td>
        <button (click)="edit(student.id)" class="button-edit" md-icon-button mdTooltip="Editar concluinte">
          <md-icon>edit</md-icon>
        </button>
      </td>
    </tr>
  </tbody>
</table>
<md-toolbar>
  <span class="pagination-spacer"></span>
  <div class="pagination-info">
    <label>
      Página:
      <button [disabled]="this.infoApi?.total<=0" md-icon-button class="md-icon-button" [mdMenuTriggerFor]="pageNumber" mdTooltip="Número da página">
        {{ apiPage }}<md-icon class="md-toolbar grey">arrow_drop_down</md-icon>
      </button>
    </label>
    <md-menu #pageNumber="mdMenu">
      <button *ngFor="let page of (this.infoApi?.last_page | arrayGenerator)"  (click)="changePage(page);" md-menu-item>
        <span>{{page}}</span>
      </button>
    </md-menu>
    <label>
      Concluintes por página:
      <button class="md-icon-button" md-icon-button [mdMenuTriggerFor]="perPageSelect" mdTooltip="Páginas">
        {{ apiLimit }}<md-icon class="md-toolbar grey">arrow_drop_down</md-icon>
      </button>
    </label>
    <md-menu #perPageSelect="mdMenu">
      <button *ngFor="let value of arrayPagination" (click)="changeLimit(value)" md-menu-item><span>{{value}}</span></button>
    </md-menu>
    <span>
      {{ infoApi?.from | showNumber}} - {{ infoApi?.to | showNumber}} de {{ infoApi?.total | showNumber}}
    </span>
    <button *ngIf="(apiPage<this.infoApi?.total) && apiPage>1" md-icon-button class="previus-btn md-icon-button"
            (click)="nextPreviousPage(-1)" mdTooltip="Anterior">
      <md-icon class="md-toolbar grey">keyboard_arrow_left</md-icon>
    </button>
    <button *ngIf="apiPage<this.infoApi?.total" md-icon-button class="md-icon-button"
            (click)="nextPreviousPage(1)" mdTooltip="Próximo">
      <md-icon class="md-toolbar grey">keyboard_arrow_right</md-icon>
    </button>
  </div>
</md-toolbar>
